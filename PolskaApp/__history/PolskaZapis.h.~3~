//---------------------------------------------------------------------------

#ifndef PolskaZapisH
#define PolskaZapisH
#include "Stack.h"
#include <vcl.h>
//---------------------------------------------------------------------------
#endif

using namespace std;

struct PolskaZapis
{
	String note;
	String polskNote;

	String convert()
	{
		List<char> symbol;

		/*for(int i = 1; i < note.Length(); i++)
		{
			if (note[i] == ' ')
			{
				note.Delete(i, 1);
			}
        }
           */

		int check = 0,  f = 1;
		for (int i = 1; i <= note.Length(); i++)
		{
			if(isdigit(note[i]) || note[i] == ',')
			{
				polskNote.Insert(note[i],f);
				f++;
				check = 1;
			}
			else
			{
				 if(check == 1)
				 {
					 polskNote.Insert(" ",f);
					 f++;
					 check = 0;
				 }
				 switch(note[i])
				 {
					 case '(':
						symbol.PushBack(note[i]);
						break;
					 case '+':
						if (symbol[symbol.GetSize()] == '-' || symbol[symbol.GetSize()] == '+')
						{
							polskNote.Insert(symbol[symbol.GetSize()],f);
							f++;
							symbol.PopFront();
							symbol.PushBack(note[i]);
						}
						else if (symbol[symbol.GetSize()] == '*' || symbol[symbol.GetSize()] == '/')
						{
							polskNote.Insert(symbol[symbol.GetSize()],f);
							f++;
							symbol.PopFront();
							symbol.PushBack(note[i]);
						}
						else
						{
							symbol.PushBack(note[i]);
							ShowMessage("Xui Sosi Sobaka");
						}
						break;
					 case '-':
						if (symbol[symbol.GetSize()] == '+' || symbol[symbol.GetSize()] == '-')
							{
								polskNote.Insert(symbol[symbol.GetSize()],f);
								f++;
								symbol.PopFront();
								symbol.PushBack(note[i]);
							}
						else if (symbol[symbol.GetSize()] == '*' || symbol[symbol.GetSize()] == '/')
							{
								polskNote.Insert(symbol[symbol.GetSize()],f);
								f++;
								symbol.PopFront();
								symbol.PushBack(note[i]);
							}
						else
							symbol.PushBack(note[i]);
						break;
					 case '*':
						polskNote.Insert(symbol[symbol.GetSize()],f);
						f++;
						break;
					 case '/':
						polskNote.Insert(symbol[symbol.GetSize()],f);
						f++;
						break;
					 case ')':
						 {
							int j = symbol.GetSize();
							for(int i = 0; i < j; i++)
							{
								polskNote.Insert(symbol[symbol.GetSize()],f);
								symbol.PopFront();
								f++;
							}
						 }
						break;
					 default:
						ShowMessage("Xui Sosi Sobaka");
						break;
				 }

			}
		}
		int j = symbol.GetSize();
		for(int i = 0; i < j; j--)
		{
			polskNote.Insert(symbol[j],f);
			symbol.PopFront();
			f++;
		}
		return polskNote;
	}
};